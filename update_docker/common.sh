#!/bin/bash
#======================================================================================================================
#          FILE: common.sh
#   DESCRIPTION: common function
#       CREATED: 2017/07/20
#        AUTHOR: honglei
#======================================================================================================================

_COLORS=${BS_COLORS:-$(tput colors 2>/dev/null || echo 0)}
__detect_color_support() {
    if [ $? -eq 0 ] && [ "$_COLORS" -gt 2 ]; then
        RC="\033[1;31m"
        GC="\033[1;32m"
        BC="\033[1;34m"
        YC="\033[1;33m"
        EC="\033[0m"
    else
        RC=""
        GC=""
        BC=""
        YC=""
        EC=""
    fi
}
__detect_color_support


#---  FUNCTION  -------------------------------------------------------------------------------------------------------
#          NAME:  echoerr
#   DESCRIPTION:  Echo errors to stderr.
#----------------------------------------------------------------------------------------------------------------------
echoerror() {
    printf "${RC} * ERROR${EC}: [`date "+%Y/%m/%d %H:%M:%S"`]: %s\n" "$@" 1>&2;
}

#---  FUNCTION  -------------------------------------------------------------------------------------------------------
#          NAME:  echoinfo
#   DESCRIPTION:  Echo information to stdout.
#----------------------------------------------------------------------------------------------------------------------
echoinfo() {
    printf "${GC} *  INFO${EC}: [`date "+%Y/%m/%d %H:%M:%S"`]: %s\n" "$@";
}

#---  FUNCTION  -------------------------------------------------------------------------------------------------------
#          NAME:  echowarn
#   DESCRIPTION:  Echo warning informations to stdout.
#----------------------------------------------------------------------------------------------------------------------
echowarn() {
    printf "${YC} *  WARN${EC}: [`date "+%Y/%m/%d %H:%M:%S"`]: %s\n" "$@";
}

#---  FUNCTION  -------------------------------------------------------------------------------------------------------
#          NAME:  echodebug
#   DESCRIPTION:  Echo debug information to stdout.
#----------------------------------------------------------------------------------------------------------------------
echodebug() {
    if [ "$_ECHO_DEBUG" -eq 0 ]; then
        printf "${BC} * DEBUG${EC}: [`date "+%Y/%m/%d %H:%M:%S"`]: %s\n" "$@";
    fi
}

#---  FUNCTION  -------------------------------------------
#          NAME:  echolog
#   DESCRIPTION:  Echo log information to stdout.
#----------------------------------------------------------
echolog() {
  printf "${GC} *  INFO${EC}: [`date "+%Y/%m/%d %H:%M:%S"`]: %s\n" "$@";
}